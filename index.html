<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>City Weather</title>

    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://kit.fontawesome.com/d55684f920.js" crossorigin="anonymous"></script>
</head>
<body>
    <main>
        <div class="weather">
            <div id="image"><i class="fa-solid fa-cloud-sun"></i></div>
            <div id="city">Nie wybrano</div>
            <div id="date"></div>
            <div id="weekday"></div>
        </div>
        <div class="time_weather">
            <div id="temperature">
                <div class="temperature">
                    10C
                </div>
            </div>
            <div id="time">
                <div class="time">
                    12:00
                </div>
            </div>
        </div>
        <div class="map">
            <div id="map"></div>
        </div>
    </main>
</body>
<script>
<!--  TodayDate  -->
    function formatDate(date) {
        var day = date.getDate();
        var month = date.getMonth() + 1;
        var year = date.getFullYear();

        return day + "." + month + "." + year;
    }

    function getPolishDayOfWeek(date) {
        var options = { weekday: 'long', timeZone: 'UTC', locale: 'pl-PL' };
        return date.toLocaleDateString('pl-PL', options);
    }

    var today = new Date();
    var formatted_today = formatDate(today);
    var weekday = getPolishDayOfWeek(today);
    var dateElement = document.getElementById('date');
    var weekdayElement = document.getElementById('weekday');

    dateElement.textContent = formatted_today;
    weekdayElement.textContent = weekday;

    console.log(formatted_today);
<!--  Map  -->
    var map = L.map('map').setView([52, 19], 7);
    var cityElement = document.getElementById('city');

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    function onMapClick(e) {
        var latlng = e.latlng;
        var city_url = 'https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=' + latlng.lat + '&lon=' + latlng.lng;

        fetch(city_url)
            .then(response => response.json())
            .then(data => {
                var city = data.address.city;
                if (!city) {
                    city = data.address.town || data.address.village || data.address.hamlet;
                }
                cityElement.textContent = city || "Nie wybrano";
            })

        var weather_url = 'https://api.open-meteo.com/v1/forecast';
        var latitude = 'latitude=' + latlng.lat;
        var longitude = 'longitude=' + latlng.lng;
        var hourly = 'hourly=temperature_2m';
        var complete_weather_url = weather_url + "?" + latitude + "&" + longitude + "&" + hourly;

        fetch(complete_weather_url)
            .then(response => response.json())
            .then(data => {
                var times = data.hourly.time;
                var temperatures = data.hourly.temperature_2m;
                var timeElement = document.getElementById('time');
                var temperatureElement = document.getElementById('temperature');

                timeElement.innerHTML = '';

                if (times && times.length > 0) {
                    times.forEach(time => {
                        var hour = new Date(time).getHours();
                        var minutes = new Date(time).getMinutes();
                        if (minutes === 0) {
                            minutes = "00";
                        }
                        var formattedTime = hour + ":" + minutes
                        var timeDiv = Object.assign(document.createElement('div'), {
                            className: 'time', innerText: formattedTime
                        });
                        timeElement.appendChild(timeDiv);
                    });
                }
            })
    }

    map.on('click', onMapClick);
</script>
</html>